{"ast":null,"code":"var _jsxFileName = \"/home/shaon/Projects/auth/auth-client/src/App.js\";\nimport React from 'react';\nimport { BrowserRouter as Router, Switch, Route, NavLink } from 'react-router-dom';\nimport Books from './components/Books';\nimport Login from './components/Login';\nimport apiClient, { logout_url } from './services/api';\nimport Cookies from 'js-cookie';\nconst App = () => {\n  const [loggedIn, setLoggedIn] = React.useState(sessionStorage.getItem('loggedIn') == 'true' || false);\n  const login = () => {\n    setLoggedIn(true);\n    sessionStorage.setItem('loggedIn', true);\n  };\n  const logout = () => {\n    // apiClient.defaults.headers = `Bearer ${Cookies.get('access_token')}`;\n    apiClient.interceptors.request.use(config => {\n      config.headers['Authorization'] = `Bearer ${Cookies.get('access_token')}`;\n      return config;\n    });\n    apiClient.post(logout_url, []).then(response => {\n      if (response.status === 200) {\n        //204\n        Cookies.remove('access_token');\n        setLoggedIn(false);\n        sessionStorage.setItem('loggedIn', false);\n      }\n    });\n  };\n  const authLink = loggedIn ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: logout,\n    className: \"nav-link btn btn-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }, \"Logout\") : /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/login\",\n    className: \"nav-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }\n  }, \"Login\");\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"navbar navbar-expand-sm navbar-dark bg-dark fixed-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"collapse navbar-collapse\",\n    id: \"navbarSupportedContent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"navbar-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/\",\n    className: \"nav-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, \"Books\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 11\n    }\n  }, authLink)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5 pt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    exact: true,\n    render: props => /*#__PURE__*/React.createElement(Books, Object.assign({}, props, {\n      loggedIn: loggedIn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    render: props => /*#__PURE__*/React.createElement(Login, Object.assign({}, props, {\n      login: login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }))));\n};\nexport default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Switch","Route","NavLink","Books","Login","apiClient","logout_url","Cookies","App","loggedIn","setLoggedIn","useState","sessionStorage","getItem","login","setItem","logout","interceptors","request","use","config","headers","get","post","then","response","status","remove","authLink","props"],"sources":["/home/shaon/Projects/auth/auth-client/src/App.js"],"sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Switch, Route, NavLink } from 'react-router-dom';\nimport Books from './components/Books';\nimport Login from './components/Login';\nimport apiClient, { logout_url } from './services/api';\nimport Cookies from 'js-cookie';\n\nconst App = () => {\n  const [loggedIn, setLoggedIn] = React.useState(\n    sessionStorage.getItem('loggedIn') == 'true' || false\n  );\n  const login = () => {\n    setLoggedIn(true);\n    sessionStorage.setItem('loggedIn', true);\n  };\n  const logout = () => {\n    // apiClient.defaults.headers = `Bearer ${Cookies.get('access_token')}`;\n    apiClient.interceptors.request.use(config => {\n      config.headers['Authorization'] = `Bearer ${Cookies.get('access_token')}`;\n      return config;\n    });\n    apiClient.post(logout_url,[]).then(response => {\n      if (response.status === 200) { //204\n        Cookies.remove('access_token');\n        setLoggedIn(false);\n        sessionStorage.setItem('loggedIn', false);\n      }\n    })\n  };\n  const authLink = loggedIn \n    ? <button onClick={logout} className=\"nav-link btn btn-link\">Logout</button> \n    : <NavLink to='/login' className=\"nav-link\">Login</NavLink>;\n  return (\n    <Router>\n      <nav className=\"navbar navbar-expand-sm navbar-dark bg-dark fixed-top\">\n      <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul className=\"navbar-nav\">\n          <li className=\"nav-item\">\n            <NavLink to='/' className=\"nav-link\">Books</NavLink>\n          </li>\n          <li className=\"nav-item\">\n            {authLink}\n          </li>\n        </ul>\n        </div>\n      </nav>\n      <div className=\"container mt-5 pt-5\">\n        <Switch>\n          <Route path='/' exact render={props => (\n            <Books {...props} loggedIn={loggedIn} />\n          )} />\n          <Route path='/login' render={props => (\n            <Login {...props} login={login} />\n          )} />\n        </Switch>\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}